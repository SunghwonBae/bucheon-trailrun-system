// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ğŸƒ ì‚°ì•… ë§ˆë¼í†¤(íŠ¸ë ˆì¼ ëŸ¬ë‹) ì„ ìˆ˜ ë° ê¸°ë¡ ëª¨ë¸
model TrailRunner {
  id          Int       @id @default(autoincrement())
  bibNumber   String    @unique // ë°°ë²ˆ
  name        String?           // ì´ë¦„
  
  // ì„ ìˆ˜ ì •ë³´
  phone       String?           // í°ë²ˆí˜¸
  gender      String?           // ë‚¨ì—¬êµ¬ë¶„
  birthYear   Int?              // ìƒë…„
  affiliation String?           // ì†Œì†
  note        String?           // ë¹„ê³ (ê¸°íƒ€ì‚¬í•­)

  // ì‹œê°„ ê¸°ë¡
  startTime   DateTime?         // ì¶œë°œ ì‹œê°„
  finishTime  DateTime?         // ë„ì°© ì‹œê°„
  autoFinishTime  DateTime? // GPXë¡œ ì¸¡ì •ëœ ìë™ ê¸°ë¡ (ì¶”ê°€)

  paymentStatus   String    @default("N") // Y: ì…ê¸ˆí™•ì¸, N: ë¯¸ì…ê¸ˆ, F: ë¬´ë£Œ
  printCount      Int       @default(0)   // ê¸°ë¡ì¦ ì¸ì‡„ íšŸìˆ˜
  
  createdAt   DateTime  @default(now())

  @@map("trail_runners") // DB í…Œì´ë¸” ì´ë¦„ì„ trail_runnersë¡œ ì„¤ì •
}

// [ì¶”ê°€] ëŒ€íšŒ ì„¤ì • ê´€ë¦¬ (ë…„ë„ë³„)
model RaceSetting {
  id            Int     @id @default(autoincrement())
  year          Int     @unique
  goalRadius    Int     @default(20)
  rankLimit     Int     @default(5)
  seniorYear    Int     // ì²­ì¥ë…„ êµ¬ë¶„ ë…„ë„
  finishLineLat Float   @default(37.503)
  finishLineLng Float   @default(126.795)
}

// ì—„ë§ˆê°€ ë¯¸ë¦¬ ì •ì˜í•´ë‘ëŠ” í•  ì¼ ëª©ë¡
model TodoMaster {
  id        Int      @id @default(autoincrement())
  title     String
  color     String   @default("#FFD700")
  plans     TodoPlan[]
}

// ì•„ì´ë“¤ì´ ì‹œê°„í‘œì— ë°°ì¹˜í•œ ë°ì´í„°
model TodoPlan {
  id           Int        @id @default(autoincrement())
  todoMasterId Int
  todoMaster   TodoMaster @relation(fields: [todoMasterId], references: [id])
  childName    String     // í•˜ëŒ, ì›€ì°¬, íƒœë‘
  planDate     String     // "2024-05-20"
  timeSlot     String     // "08:30"
}